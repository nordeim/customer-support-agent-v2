$ python fix_sqlalchemy_metadata.py
üîç Fixing SQLAlchemy 'metadata' reserved attribute conflict...

üîß Updating model files:
  ‚úÖ backend/app/models/memory.py (1 change(s))
  ‚úÖ backend/app/models/message.py (1 change(s))
  ‚úÖ backend/app/models/session.py (1 change(s))

üîß Updating usage in other files:
  ‚úÖ backend/app/agents/chat_agent.py (6 change(s))
  ‚úÖ backend/app/api/routes/chat.py (3 change(s))
  ‚úÖ backend/app/api/routes/sessions.py (5 change(s))
  ‚úÖ backend/app/database.py (1 change(s))
  ‚úÖ backend/app/tools/memory_tool.py (2 change(s))

üìä Summary:
  Files changed: 8
  Total replacements: 20

‚úÖ Fix applied successfully. Please verify with:
   python -c "from app.models.memory import Memory; print('OK')"
   python -m app.main
(venv) pete@pop-os:/Home1/project/customer-support-agent-v2
$ cd backend/
(venv) pete@pop-os:/Home1/project/customer-support-agent-v2/backend
$ python -c "from app.models.memory import Memory; print('OK')"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/Home1/project/customer-support-agent-v2/backend/app/__init__.py", line 15, in <module>
    from .main import app
  File "/Home1/project/customer-support-agent-v2/backend/app/main.py", line 13, in <module>
    from .api.routes import chat, sessions, health
  File "/Home1/project/customer-support-agent-v2/backend/app/api/__init__.py", line 5, in <module>
    from .websocket import websocket_endpoint, ConnectionManager, manager
  File "/Home1/project/customer-support-agent-v2/backend/app/api/websocket.py", line 11, in <module>
    from ..agents.chat_agent import CustomerSupportAgent
  File "/Home1/project/customer-support-agent-v2/backend/app/agents/__init__.py", line 5, in <module>
    from .chat_agent import CustomerSupportAgent, AgentResponse, AgentContext
  File "/Home1/project/customer-support-agent-v2/backend/app/agents/chat_agent.py", line 14, in <module>
    from ..tools import RAGTool, MemoryTool, AttachmentTool, EscalationTool
  File "/Home1/project/customer-support-agent-v2/backend/app/tools/__init__.py", line 7, in <module>
    from .rag_tool import RAGTool
  File "/Home1/project/customer-support-agent-v2/backend/app/tools/rag_tool.py", line 17, in <module>
    from ..services.cache_service import CacheService
  File "/Home1/project/customer-support-agent-v2/backend/app/services/__init__.py", line 16, in <module>
    from .memory_service import MemoryService, memory_service
  File "/Home1/project/customer-support-agent-v2/backend/app/services/memory_service.py", line 15, in <module>
    from ..models.memory import Memory
  File "/Home1/project/customer-support-agent-v2/backend/app/models/__init__.py", line 6, in <module>
    from .message import Message
  File "/Home1/project/customer-support-agent-v2/backend/app/models/message.py", line 12, in <module>
    class Message(Base):
  File "/Home1/project/customer-support-agent-v2/backend/app/models/message.py", line 33, in Message
    processing_time = Column(Float, nullable=True)  # Time taken to generate response
                             ^^^^^
NameError: name 'Float' is not defined. Did you mean: 'float'?
(venv) pete@pop-os:/Home1/project/customer-support-agent-v2/backend
$ python -m app.main
Traceback (most recent call last):
  File "<frozen runpy>", line 189, in _run_module_as_main
  File "<frozen runpy>", line 112, in _get_module_details
  File "/Home1/project/customer-support-agent-v2/backend/app/__init__.py", line 15, in <module>
    from .main import app
  File "/Home1/project/customer-support-agent-v2/backend/app/main.py", line 13, in <module>
    from .api.routes import chat, sessions, health
  File "/Home1/project/customer-support-agent-v2/backend/app/api/__init__.py", line 5, in <module>
    from .websocket import websocket_endpoint, ConnectionManager, manager
  File "/Home1/project/customer-support-agent-v2/backend/app/api/websocket.py", line 11, in <module>
    from ..agents.chat_agent import CustomerSupportAgent
  File "/Home1/project/customer-support-agent-v2/backend/app/agents/__init__.py", line 5, in <module>
    from .chat_agent import CustomerSupportAgent, AgentResponse, AgentContext
  File "/Home1/project/customer-support-agent-v2/backend/app/agents/chat_agent.py", line 14, in <module>
    from ..tools import RAGTool, MemoryTool, AttachmentTool, EscalationTool
  File "/Home1/project/customer-support-agent-v2/backend/app/tools/__init__.py", line 7, in <module>
    from .rag_tool import RAGTool
  File "/Home1/project/customer-support-agent-v2/backend/app/tools/rag_tool.py", line 17, in <module>
    from ..services.cache_service import CacheService
  File "/Home1/project/customer-support-agent-v2/backend/app/services/__init__.py", line 16, in <module>
    from .memory_service import MemoryService, memory_service
  File "/Home1/project/customer-support-agent-v2/backend/app/services/memory_service.py", line 15, in <module>
    from ..models.memory import Memory
  File "/Home1/project/customer-support-agent-v2/backend/app/models/__init__.py", line 6, in <module>
    from .message import Message
  File "/Home1/project/customer-support-agent-v2/backend/app/models/message.py", line 12, in <module>
    class Message(Base):
  File "/Home1/project/customer-support-agent-v2/backend/app/models/message.py", line 33, in Message
    processing_time = Column(Float, nullable=True)  # Time taken to generate response
                             ^^^^^
NameError: name 'Float' is not defined. Did you mean: 'float'?

