# ===========================
# Application Settings
# ===========================
APP_NAME=Customer Support AI Agent
APP_VERSION=2.0.0
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=INFO

# ===========================
# API Configuration
# ===========================
API_HOST=0.0.0.0
API_PORT=8000
API_PREFIX=/api
API_WORKERS=4
CORS_ORIGINS=["http://localhost:3000","http://localhost:8000"]

# ===========================
# Security
# ===========================
SECRET_KEY=your-secret-key-here-min-32-chars
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24

# ===========================
# Database
# ===========================
# SQLite (Development)
DATABASE_URL=sqlite:///./data/customer_support.db

# PostgreSQL (Production)
# DATABASE_URL=postgresql://user:password@localhost:5432/customer_support

DATABASE_ECHO=false
DATABASE_POOL_SIZE=10
DATABASE_POOL_OVERFLOW=20
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600
DATABASE_ASYNC_ENABLED=true

# ===========================
# Redis Configuration
# ===========================
REDIS_URL=redis://localhost:6379/0
# REDIS_PASSWORD=your-redis-password
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true
REDIS_HEALTH_CHECK_INTERVAL=30
CACHE_ENABLED=true
REDIS_TTL=3600

# ===========================
# Session Management (NEW in v2.0)
# ===========================

# Session Store Type: in_memory or redis
SESSION_STORE_TYPE=in_memory

# Legacy compatibility (sets SESSION_STORE_TYPE to redis if true)
USE_SHARED_CONTEXT=false

# Session Timeouts
SESSION_TIMEOUT_MINUTES=30
SESSION_CLEANUP_INTERVAL_SECONDS=300

# In-Memory Store Settings
SESSION_MAX_SESSIONS=10000

# Redis Session Store Settings
REDIS_SESSION_KEY_PREFIX=agent:session:
REDIS_SESSION_TTL_SECONDS=1800

# Session Security
SESSION_ENCRYPTION_ENABLED=true
# SESSION_ENCRYPTION_KEY=<base64-encoded-32-byte-key>
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"

SESSION_FINGERPRINTING_ENABLED=true
SESSION_FINGERPRINT_STRICT=false

# Distributed Locking
SESSION_LOCKING_ENABLED=true
SESSION_LOCK_TIMEOUT_SECONDS=30
SESSION_LOCK_RETRY_ATTEMPTS=3

# L1 Cache (In-Memory Cache for Redis Sessions)
SESSION_L1_CACHE_ENABLED=true
SESSION_L1_CACHE_SIZE=1000
SESSION_L1_CACHE_TTL_SECONDS=60

# Session Analytics
SESSION_ANALYTICS_ENABLED=false
SESSION_MAX_MESSAGES=1000

# ===========================
# AI/ML Configuration
# ===========================
AI_PROVIDER=local

# OpenAI
# OPENAI_API_KEY=sk-...
# OPENAI_ORGANIZATION=org-...
# OPENAI_API_BASE=https://api.openai.com/v1

# Azure OpenAI
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com
# AZURE_OPENAI_API_KEY=your-key
# AZURE_OPENAI_DEPLOYMENT=your-deployment
# AZURE_OPENAI_API_VERSION=2024-10-01-preview

AGENT_MODEL=gpt-4o-mini
AGENT_TEMPERATURE=0.7
AGENT_MAX_TOKENS=2000
AGENT_TIMEOUT=30
AGENT_MAX_RETRIES=3
AGENT_TOOL_REGISTRY_MODE=legacy

# Embeddings
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
EMBEDDING_GEMMA_MODEL=Qwen/Qwen3-Embedding-0.6B
EMBEDDING_DIMENSION=768
EMBEDDING_BATCH_SIZE=32
USE_GPU_EMBEDDINGS=false

# ===========================
# ChromaDB
# ===========================
CHROMA_PERSIST_DIRECTORY=./data/chroma_db
CHROMA_COLLECTION_NAME=customer_support_docs
CHROMA_DISTANCE_FUNCTION=ip

# ===========================
# RAG Configuration
# ===========================
RAG_ENABLED=true
RAG_CHUNK_SIZE=500
RAG_CHUNK_OVERLAP=50
RAG_SEARCH_K=5
RAG_SIMILARITY_THRESHOLD=0.7
RAG_RERANK_ENABLED=false

# ===========================
# Memory Configuration
# ===========================
MEMORY_ENABLED=true
MEMORY_MAX_ENTRIES=100
MEMORY_TTL_HOURS=24
MEMORY_CLEANUP_DAYS=30

# ===========================
# File Handling
# ===========================
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=[".pdf",".doc",".docx",".txt",".md",".csv",".xlsx"]
UPLOAD_DIRECTORY=./data/uploads
PROCESS_UPLOADS_ASYNC=true

# ===========================
# Rate Limiting
# ===========================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60
RATE_LIMIT_BURST=10

# ===========================
# Monitoring & Telemetry
# ===========================
ENABLE_TELEMETRY=false
METRICS_ENABLED=true
METRICS_PORT=9090
# OTLP_ENDPOINT=http://localhost:4317
OTLP_SERVICE_NAME=customer-support-ai
# SENTRY_DSN=https://...@sentry.io/...

# ===========================
# WebSocket
# ===========================
WEBSOCKET_ENABLED=true
WEBSOCKET_PING_INTERVAL=30
WEBSOCKET_PING_TIMEOUT=10
WEBSOCKET_MAX_CONNECTIONS=1000

# ===========================
# Escalation
# ===========================
ESCALATION_ENABLED=true
ESCALATION_CONFIDENCE_THRESHOLD=0.7
ESCALATION_KEYWORDS={"urgent":1.0,"emergency":1.0,"legal":0.9}
# ESCALATION_NOTIFICATION_EMAIL=support@example.com
# ESCALATION_WEBHOOK_URL=https://...

# ===========================
# Feature Flags
# ===========================
FEATURE_VOICE_INPUT=false
FEATURE_MULTILINGUAL=false
FEATURE_ANALYTICS=false
FEATURE_EXPORT_CHAT=true
FEATURE_FILE_PREVIEW=true

# ===========================
# Development Settings
# ===========================
DEV_AUTO_RELOAD=true
DEV_SAMPLE_DATA=true
DEV_MOCK_AI=false
DEV_SLOW_MODE=false
